javascript:(async function() { 'use strict'; var STATE = { followers: [], following: [], onlyIFollow: [], onlyFollowsMe: [], mutual: [], mySpaceId: null, totalFollowers: 0, totalFollowing: 0, listObserver: null, urlObserver: null, buttonsActive: false, currentPageCache: new Map(), lastCursor: null, isFetchingMore: false, currentViewSpaceId: null, isFollowersApprox: false, isFollowingApprox: false, chatLockedUsers: new Set() }; function recalculateFollowLists() { var followerIds = new Set(STATE.followers.map(function(f) { return String(f.spaceId); })); var followingIds = new Set(STATE.following.map(function(f) { return String(f.spaceId); })); STATE.onlyIFollow = STATE.following.filter(function(f) { return !followerIds.has(String(f.spaceId)); }); STATE.onlyFollowsMe = STATE.followers.filter(function(f) { return !followingIds.has(String(f.spaceId)); }); STATE.mutual = STATE.following.filter(function(f) { return followerIds.has(String(f.spaceId)); }); console.log('[ë°ì´í„° ê°±ì‹ ]', { followers: STATE.followers.length, following: STATE.following.length, onlyIFollow: STATE.onlyIFollow.length, onlyFollowsMe: STATE.onlyFollowsMe.length, mutual: STATE.mutual.length }); } function updateFollowStatus(spaceId, isNowFollowing, apiData) { spaceId = String(spaceId); if (isNowFollowing) { var existsInFollowing = STATE.following.some(function(f) { return String(f.spaceId) === spaceId; }); if (!existsInFollowing) { var userInfo = STATE.followers.find(function(f) { return String(f.spaceId) === spaceId; }) || STATE.following.find(function(f) { return String(f.spaceId) === spaceId; }); if (!userInfo) { STATE.currentPageCache.forEach(function(user) { if (String(user.spaceId) === spaceId) { userInfo = user; } }); } if (!userInfo && apiData) { userInfo = { spaceId: apiData.spaceId, nickName: apiData.nickname, activeChannelCount: apiData.activeChannelCount, activeChannelTypes: apiData.activeChannelTypes, myKeyword: '', subscriberCount: 0, urlId: '', createdAt: new Date().toISOString(), lastContentsCreatedAt: null }; console.log('[API ì‘ë‹µìœ¼ë¡œ userInfo ìƒì„±]', userInfo.nickName); } if (userInfo) { STATE.following.push(userInfo); console.log('[íŒ”ë¡œìš° ì¶”ê°€]', userInfo.nickName, '(spaceId:', spaceId + ') - ì´ following:', STATE.following.length); } else { console.warn('[íŒ”ë¡œìš° ì¶”ê°€ ì‹¤íŒ¨] userInfoë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ. spaceId:', spaceId); } } else { console.log('[íŒ”ë¡œìš° ì¶”ê°€ ìŠ¤í‚µ] ì´ë¯¸ followingì— ì¡´ì¬. spaceId:', spaceId); } } else { var beforeCount = STATE.following.length; STATE.following = STATE.following.filter(function(f) { return String(f.spaceId) !== spaceId; }); console.log('[íŒ”ë¡œìš° ì œê±°] spaceId:', spaceId, '- ì´ following:', STATE.following.length, '(ë³€í™”:', (beforeCount - STATE.following.length) + ')'); } recalculateFollowLists(); updateGUIStats(); } function getFollowStatus(spaceId) { spaceId = String(spaceId); var isOnlyIFollow = STATE.onlyIFollow.some(function(f) { return String(f.spaceId) === spaceId; }); var isOnlyFollowsMe = STATE.onlyFollowsMe.some(function(f) { return String(f.spaceId) === spaceId; }); var isMutual = STATE.mutual.some(function(f) { return String(f.spaceId) === spaceId; }); if (isOnlyIFollow) return 'unfollow'; if (isOnlyFollowsMe) return 'followback'; if (isMutual) return 'mutual'; return 'follow'; } async function toggleFollow(spaceId, currentStatus) { try { var subscribed = (currentStatus === 'unfollow' || currentStatus === 'mutual'); console.log('[íŒ”ë¡œìš° í† ê¸€]', currentStatus, 'â†’', subscribed ? 'ì–¸íŒ”ë¡œìš°' : 'íŒ”ë¡œìš°', 'spaceId:', spaceId); var response = await fetch('https://in.naver.com/graphql', { method: 'POST', credentials: 'include', headers: { 'accept': '*/*', 'content-type': 'application/json', 'x-api-level': '11' }, body: JSON.stringify({ operationName: 'toggleSubscription', variables: { input: { subscribed: subscribed, spaceId: spaceId, notification: !subscribed } }, query: 'mutation toggleSubscription($input: ToggleSubscriptionInput!) { toggleSubscription(input: $input) { activeChannelCount activeChannelTypes nickname spaceId __typename } }' }) }); if (response.ok) { var result = await response.json(); var userData = result.data && result.data.toggleSubscription ? result.data.toggleSubscription : null; console.log('[íŒ”ë¡œìš° í† ê¸€ ì„±ê³µ]', subscribed ? 'ì–¸íŒ”ë¡œìš°' : 'íŒ”ë¡œìš°', 'spaceId:', spaceId, 'API ì‘ë‹µ:', userData); updateFollowStatus(spaceId, !subscribed, userData); return true; } console.log('[íŒ”ë¡œìš° í† ê¸€ ì‹¤íŒ¨] HTTP', response.status); return false; } catch (e) { console.error('[íŒ”ë¡œìš° í† ê¸€ ì˜¤ë¥˜]:', e); return false; } } async function openChatWindow(targetSpaceId) { try { var talkUrlResponse = await fetch('https://gw.in.naver.com/home/api/v1/spaces/' + targetSpaceId + '/talktalk-url', { credentials: 'include', headers: { 'accept': 'application/json, text/plain, */*', 'x-api-level': '11' } }); if (talkUrlResponse.status === 423) { console.log('[ì±„íŒ… LOCK] spaceId:', targetSpaceId, '- ì±„íŒ…ì´ ì ê¸´ ìƒíƒœì…ë‹ˆë‹¤.'); STATE.chatLockedUsers.add(String(targetSpaceId)); return 'locked'; } if (!talkUrlResponse.ok) return false; var talkUrlData = await talkUrlResponse.json(); if (!talkUrlData.chatUrl) return false; window.open(talkUrlData.chatUrl, '_blank'); return true; } catch (e) { console.error('ì±„íŒ…ì°½ ì—´ê¸° ì‹¤íŒ¨:', e); return false; } } function removeAllListButtons() { document.querySelectorAll('.inflsurfer-action-btn').forEach(function(btn) { btn.remove(); }); } async function fetchCurrentPageFollowers(cursor) { try { var currentSpaceId = STATE.currentViewSpaceId; if (!currentSpaceId && window.__NEXT_DATA__) { try { var pageProps = window.__NEXT_DATA__.props.pageProps; if (pageProps && pageProps.space && pageProps.space.spaceId) { currentSpaceId = pageProps.space.spaceId; } } catch (e) { console.error('[í˜„ì¬ í˜ì´ì§€ ìºì‹œ] __NEXT_DATA__ íŒŒì‹± ì˜¤ë¥˜:', e); } } if (!currentSpaceId) { var pathMatch = window.location.pathname.match(/\/([^\/]+)/); if (pathMatch && pathMatch[1]) { var urlId = pathMatch[1]; var user = STATE.followers.find(function(f) { return f.urlId === urlId; }) || STATE.following.find(function(f) { return f.urlId === urlId; }); if (user) { currentSpaceId = user.spaceId; STATE.currentViewSpaceId = currentSpaceId; console.log('[í˜„ì¬ í˜ì´ì§€ ìºì‹œ] URLì—ì„œ spaceId ì°¾ìŒ:', currentSpaceId, '(urlId:', urlId + ')'); } } } if (!currentSpaceId) { console.log('[í˜„ì¬ í˜ì´ì§€ ìºì‹œ] spaceIdë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'); return null; } var apiUrl = 'https://gw.in.naver.com/home/api/v2/spaces/' + currentSpaceId + '/subscribes/followers?limit=20&subscriberType=SPACE&sort=RECENT'; if (cursor) { apiUrl = 'https://gw.in.naver.com/home/api/v2/spaces/' + currentSpaceId + '/subscribes/followers?cursor=' + cursor + '&limit=20&subscriberType=SPACE&sort=RECENT'; console.log('[í˜„ì¬ í˜ì´ì§€ ìºì‹œ] ì¶”ê°€ ë¡œë“œ API í˜¸ì¶œ'); } else { console.log('[í˜„ì¬ í˜ì´ì§€ ìºì‹œ] ì´ˆê¸° ë¡œë“œ API í˜¸ì¶œ. spaceId:', currentSpaceId); STATE.currentPageCache.clear(); } var response = await fetch(apiUrl, { credentials: 'include', headers: { 'accept': 'application/json, text/plain, */*', 'x-api-level': '11' } }); if (!response.ok) { console.log('[í˜„ì¬ í˜ì´ì§€ ìºì‹œ] API í˜¸ì¶œ ì‹¤íŒ¨:', response.status); return null; } var data = await response.json(); data.data.forEach(function(user) { STATE.currentPageCache.set(user.nickName, user); }); console.log('[í˜„ì¬ í˜ì´ì§€ ìºì‹œ] ì €ì¥ ì™„ë£Œ. ì´ ìºì‹œ:', STATE.currentPageCache.size, 'ëª… | í˜„ì¬ ë°°ì¹˜:', data.data.length, 'ëª…'); return data.paging && data.paging.nextCursor ? data.paging.nextCursor : null; } catch (e) { console.error('[í˜„ì¬ í˜ì´ì§€ ìºì‹œ] ì˜¤ë¥˜:', e); return null; } } function addButtonsToListItem(listItem) { if (listItem.querySelector('.inflsurfer-action-btn')) return; var infoButton = listItem.querySelector('button[class*="MySubscriptionItem"][class*="info"]'); if (!infoButton) return; var detailDiv = infoButton.querySelector('[class*="MySubscriptionItem"][class*="detail"]'); if (!detailDiv) return; var fanSpan = detailDiv.querySelector('[class*="MySubscriptionItem"][class*="fan"]'); var fanCount = 0; if (fanSpan) { fanCount = parseInt(fanSpan.textContent.replace(/[^0-9]/g, '')) || 0; } var nicknameSpan = listItem.querySelector('[class*="MySubscriptionItem"][class*="nickname"] span'); var nickname = nicknameSpan ? nicknameSpan.textContent : ''; var follower = STATE.followers.find(function(f) { return f.nickName === nickname; }); var following = STATE.following.find(function(f) { return f.nickName === nickname; }); var cached = STATE.currentPageCache.get(nickname); var spaceId = null; var urlId = null; if (follower) { spaceId = follower.spaceId; urlId = follower.urlId; } else if (following) { spaceId = following.spaceId; urlId = following.urlId; } else if (cached) { spaceId = cached.spaceId; urlId = cached.urlId; console.log('[ìºì‹œ ì‚¬ìš©]', nickname, 'spaceId:', spaceId); } var buttonContainer = document.createElement('div'); buttonContainer.className = 'inflsurfer-action-btn'; buttonContainer.style.cssText = 'display: flex; gap: 4px; margin-top: 6px;'; var isMyAccount = spaceId && String(spaceId) === String(STATE.mySpaceId); var goBtn = document.createElement('button'); goBtn.textContent = 'ì´ë™í•˜ê¸°'; goBtn.style.cssText = 'padding: 4px 8px; font-size: 11px; border-radius: 4px; border: none; font-weight: 500; flex: 1;'; if (fanCount < 1 || !urlId) { goBtn.style.background = '#ddd'; goBtn.style.color = '#999'; goBtn.style.cursor = 'not-allowed'; goBtn.onclick = function(e) { e.stopPropagation(); e.preventDefault(); }; } else { goBtn.style.background = '#00c73c'; goBtn.style.color = 'white'; goBtn.style.cursor = 'pointer'; goBtn.onclick = function(e) { e.stopPropagation(); infoButton.click(); var attempts = 0; var maxAttempts = 10; var checkInterval = setInterval(function() { attempts++; var fanLink = document.querySelector('[data-role="fan"]'); if (fanLink) { clearInterval(checkInterval); console.log('[ì´ë™í•˜ê¸°] íŒ¬ ë§í¬ ë°œê²¬, í´ë¦­ ì‹œë„ (' + attempts + 'ë²ˆì§¸)'); fanLink.click(); } else if (attempts >= maxAttempts) { clearInterval(checkInterval); console.log('[ì´ë™í•˜ê¸°] íŒ¬ ë§í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ìµœëŒ€ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼)'); } }, 200); }; } var statusBtn = document.createElement('button'); statusBtn.style.cssText = 'padding: 4px 8px; font-size: 11px; border-radius: 4px; border: none; font-weight: 500; flex: 1;'; var chatBtn = document.createElement('button'); chatBtn.textContent = 'ì±„íŒ… ì—´ê¸°'; chatBtn.style.cssText = 'padding: 4px 8px; font-size: 11px; border-radius: 4px; border: none; font-weight: 500; flex: 1;'; function updateStatusButton() { if (!spaceId) { statusBtn.textContent = 'ì •ë³´ ìˆ˜ì§‘ ì¤‘'; statusBtn.style.background = '#ddd'; statusBtn.style.color = '#999'; statusBtn.style.cursor = 'not-allowed'; statusBtn.onclick = function(e) { e.stopPropagation(); e.preventDefault(); }; return; } if (isMyAccount) { statusBtn.textContent = 'ë‚´ ê³„ì •'; statusBtn.style.background = '#999'; statusBtn.style.color = 'white'; statusBtn.style.cursor = 'not-allowed'; statusBtn.onclick = function(e) { e.stopPropagation(); e.preventDefault(); }; return; } var status = getFollowStatus(spaceId); if (status === 'unfollow') { statusBtn.textContent = 'íŒ¬ ì·¨ì†Œ'; statusBtn.style.background = '#ffc107'; statusBtn.style.color = 'white'; statusBtn.style.cursor = 'pointer'; statusBtn.onclick = async function(e) { e.stopPropagation(); if (await toggleFollow(spaceId, 'unfollow')) { updateStatusButton(); updateChatButton(); } }; } else if (status === 'followback') { statusBtn.textContent = 'ë§íŒ¬ ìˆ˜ë½'; statusBtn.style.background = '#2196F3'; statusBtn.style.color = 'white'; statusBtn.style.cursor = 'pointer'; statusBtn.onclick = async function(e) { e.stopPropagation(); if (await toggleFollow(spaceId, 'followback')) { updateStatusButton(); updateChatButton(); } }; } else if (status === 'mutual') { statusBtn.textContent = 'ë§íŒ¬ ì™„ë£Œ'; statusBtn.style.background = '#999'; statusBtn.style.color = 'white'; statusBtn.style.cursor = 'not-allowed'; statusBtn.onclick = function(e) { e.stopPropagation(); e.preventDefault(); }; } else { statusBtn.textContent = 'íŒ¬ í•˜ê¸°'; statusBtn.style.background = '#00c73c'; statusBtn.style.color = 'white'; statusBtn.style.cursor = 'pointer'; statusBtn.onclick = async function(e) { e.stopPropagation(); if (await toggleFollow(spaceId, 'follow')) { updateStatusButton(); updateChatButton(); } }; } } function updateChatButton() { if (spaceId && STATE.chatLockedUsers.has(String(spaceId))) { chatBtn.textContent = 'ì±„íŒ… LOCK'; chatBtn.style.background = '#999'; chatBtn.style.color = '#ddd'; chatBtn.style.cursor = 'not-allowed'; chatBtn.onclick = function(e) { e.stopPropagation(); e.preventDefault(); }; } else if (spaceId && getFollowStatus(spaceId) === 'unfollow') { chatBtn.textContent = 'ì±„íŒ… ì—´ê¸°'; chatBtn.style.background = '#9c27b0'; chatBtn.style.color = 'white'; chatBtn.style.cursor = 'pointer'; chatBtn.onclick = async function(e) { e.stopPropagation(); var result = await openChatWindow(spaceId); if (result === 'locked') { updateChatButton(); } }; } else { chatBtn.textContent = 'ì±„íŒ… ì—´ê¸°'; chatBtn.style.background = '#ddd'; chatBtn.style.color = '#999'; chatBtn.style.cursor = 'not-allowed'; chatBtn.onclick = function(e) { e.stopPropagation(); e.preventDefault(); }; } } updateStatusButton(); updateChatButton(); buttonContainer.appendChild(goBtn); buttonContainer.appendChild(statusBtn); buttonContainer.appendChild(chatBtn); detailDiv.appendChild(buttonContainer); } async function addButtonsToAllItems() { var listItems = document.querySelectorAll('li[class*="MySubscriptionItem"][class*="root"]'); console.log('[ë²„íŠ¼ ì¶”ê°€] ë°œê²¬ëœ í•­ëª©:', listItems.length); STATE.lastCursor = await fetchCurrentPageFollowers(null); listItems.forEach(function(item) { addButtonsToListItem(item); }); } function startObservingList() { if (STATE.listObserver) STATE.listObserver.disconnect(); var targetNode = document.querySelector('ul'); if (!targetNode) { console.log('[Observer] UL ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 1ì´ˆ í›„ ì¬ì‹œë„...'); setTimeout(startObservingList, 1000); return; } var addedItemsQueue = []; var processTimeout = null; STATE.listObserver = new MutationObserver(function(mutations) { mutations.forEach(function(mutation) { if (mutation.type === 'childList') { mutation.addedNodes.forEach(function(node) { if (node.nodeType === 1 && node.className && node.className.indexOf('MySubscriptionItem') !== -1 && node.className.indexOf('root') !== -1) { addedItemsQueue.push(node); } }); } }); if (addedItemsQueue.length > 0) { clearTimeout(processTimeout); processTimeout = setTimeout(async function() { var items = addedItemsQueue.slice(); addedItemsQueue = []; console.log('[Observer] ìƒˆ í•­ëª© ê°ì§€:', items.length, 'ê°œ'); var missingItems = []; items.forEach(function(item) { var nicknameSpan = item.querySelector('[class*="MySubscriptionItem"][class*="nickname"] span'); var nickname = nicknameSpan ? nicknameSpan.textContent : ''; if (nickname && !STATE.currentPageCache.has(nickname) && !STATE.followers.some(function(f) { return f.nickName === nickname; }) && !STATE.following.some(function(f) { return f.nickName === nickname; })) { missingItems.push(nickname); } }); console.log('[Observer] ìºì‹œ ë¯¸ìŠ¤:', missingItems.length, 'ê°œ', missingItems.slice(0, 3)); if (missingItems.length > 0 && !STATE.isFetchingMore) { STATE.isFetchingMore = true; console.log('[Observer] ì¶”ê°€ ë°ì´í„° ë¡œë“œ ì‹œì‘... í˜„ì¬ ì»¤ì„œ:', STATE.lastCursor || '(ì—†ìŒ - ì´ˆê¸° ë¡œë“œ)'); var nextCursor = await fetchCurrentPageFollowers(STATE.lastCursor); STATE.lastCursor = nextCursor; STATE.isFetchingMore = false; console.log('[Observer] ì¶”ê°€ ë°ì´í„° ë¡œë“œ ì™„ë£Œ. ë‹¤ìŒ ì»¤ì„œ:', nextCursor || '(ë)'); } else if (missingItems.length > 0 && STATE.isFetchingMore) { console.log('[Observer] ì´ë¯¸ ë°ì´í„° ë¡œë“œ ì¤‘ì´ë¯€ë¡œ ëŒ€ê¸°...'); } items.forEach(function(item) { addButtonsToListItem(item); }); }, 500); } }); STATE.listObserver.observe(targetNode, { childList: true, subtree: true }); console.log('[Observer] ëª©ë¡ ê°ì‹œ ì‹œì‘'); } function startUrlObserver() { var lastUrl = location.href; STATE.urlObserver = new MutationObserver(function() { var currentUrl = location.href; if (currentUrl !== lastUrl) { console.log('[URL ë³€ê²½ ê°ì§€]', lastUrl, 'â†’', currentUrl); lastUrl = currentUrl; if (STATE.buttonsActive) { STATE.currentPageCache.clear(); STATE.lastCursor = null; STATE.isFetchingMore = false; STATE.currentViewSpaceId = null; setTimeout(async function() { removeAllListButtons(); await addButtonsToAllItems(); startObservingList(); }, 1000); } } }); STATE.urlObserver.observe(document.body, { childList: true, subtree: true }); console.log('[URL Observer] ì‹œì‘'); } if (!window.XLSX) { var script = document.createElement('script'); script.src = 'https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js'; document.head.appendChild(script); await new Promise(function(resolve) { script.onload = resolve; }); } var gui = document.createElement('div'); gui.id = 'influencer-surfer-gui'; gui.innerHTML = '<div style="position: fixed; bottom: 20px; right: 20px; width: 350px; background: white; border: 2px solid #00c73c; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); font-family: -apple-system, BlinkMacSystemFont, Segoe UI, sans-serif; z-index: 999999;"><div style="background: linear-gradient(135deg, #00c73c 0%, #00a030 100%); color: white; padding: 15px; border-radius: 10px 10px 0 0; font-weight: bold; font-size: 16px;">ì¸í”Œ ë§íŒ¬ ë„êµ¬ ver.2025.10.05</div><div style="padding: 20px;"><div style="text-align: center; margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 6px; font-size: 13px; color: #333;">ëŠ‘ëŒ€ì™•ì˜ ë¸”ë¡œê·¸ ì •ë³´ í† ë¡ ë°©: <a href="https://open.kakao.com/o/gZmiqNDh" target="_blank" style="color: #00c73c; font-weight: bold; text-decoration: none; border-bottom: 1px solid #00c73c;">ë“¤ì–´ê°€ê¸°</a></div><div id="status-text" style="margin-bottom: 15px; font-size: 14px; color: #333; min-height: 60px;">ì´ˆê¸°í™” ì¤‘...</div><div id="progress-container" style="background: #f0f0f0; height: 8px; border-radius: 4px; margin-bottom: 15px; overflow: hidden;"><div id="progress-bar" style="background: linear-gradient(90deg, #00c73c 0%, #00e647 100%); height: 100%; width: 0%; transition: width 0.3s;"></div></div><div id="button-container" style="display: flex; gap: 10px; flex-direction: column;"></div></div></div>'; document.body.appendChild(gui); var statusText = document.getElementById('status-text'); var progressBar = document.getElementById('progress-bar'); var buttonContainer = document.getElementById('button-container'); function updateStatus(text, progress) { statusText.innerHTML = text; if (progress !== undefined) progressBar.style.width = progress + '%'; } function updateGUIStats() { if (!STATE.buttonsActive) return; updateStatus('<div style="color: #00c73c; font-weight: bold; font-size: 15px; margin-bottom: 10px;">âœ“ ì‘ì—… ì™„ë£Œ!</div><div style="font-size: 13px; line-height: 1.6; color: #555;">â€¢ ë‚˜ë¥¼ íŒ¬ í•œ: ' + STATE.followers.length + 'ëª…' + (STATE.totalFollowers && STATE.totalFollowers !== STATE.followers.length ? ' <span style="color: #999;">(ì›¹í™”ë©´ ìƒ í‘œì‹œ: ' + (STATE.isFollowersApprox ? 'ì•½ ' : '') + STATE.totalFollowers.toLocaleString() + (STATE.isFollowersApprox ? '+' : '') + 'ëª…)</span>' : '') + '<br>â€¢ ë‚´ê°€ íŒ¬ í•œ: ' + STATE.following.length + 'ëª…' + (STATE.totalFollowing && STATE.totalFollowing !== STATE.following.length ? ' <span style="color: #999;">(ì›¹í™”ë©´ ìƒ í‘œì‹œ: ' + (STATE.isFollowingApprox ? 'ì•½ ' : '') + STATE.totalFollowing.toLocaleString() + (STATE.isFollowingApprox ? '+' : '') + 'ëª…)</span>' : '') + '<br>â€¢ ë‚˜ë§Œ íŒ¬ í•œ: ' + STATE.onlyIFollow.length + 'ëª…<br>â€¢ ìƒëŒ€ë§Œ íŒ¬ í•œ: ' + STATE.onlyFollowsMe.length + 'ëª…<br>â€¢ ì„œë¡œ íŒ¬ í•œ: ' + STATE.mutual.length + 'ëª…<br><br><span style="font-size: 11px; color: #999;">ğŸ’¡ ë¹„ì¸í”Œ ëª…ë‹¨ì€ ì¶”ì¶œë˜ì§€ ì•Šì•„ ìˆ«ì ì°¨ì´ê°€ ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span></div>', 100); } function addButton(text, onClick, color) { var btn = document.createElement('button'); btn.textContent = text; btn.style.cssText = 'padding: 12px; background: ' + (color || '#00c73c') + '; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 14px; transition: all 0.2s;'; btn.onmouseover = function() { btn.style.transform = 'translateY(-2px)'; }; btn.onmouseout = function() { btn.style.transform = 'translateY(0)'; }; btn.onclick = onClick; buttonContainer.appendChild(btn); return btn; } function closeAndCleanup() { if (STATE.listObserver) STATE.listObserver.disconnect(); if (STATE.urlObserver) STATE.urlObserver.disconnect(); removeAllListButtons(); STATE.buttonsActive = false; gui.remove(); } addButton('âŒ ì¢…ë£Œ', closeAndCleanup, '#ff4444'); function parseCountText(text) { if (!text) return { count: 0, isApprox: false }; var isApprox = false; var count = 0; if (text.includes('ë§Œ+') || text.includes('ë§Œ +')) { isApprox = true; var numStr = text.replace(/[^0-9.]/g, ''); var num = parseFloat(numStr); if (!isNaN(num)) { count = Math.round(num * 10000); } } else { var numStr = text.replace(/,/g, ''); var num = parseInt(numStr); if (!isNaN(num)) { count = num; } } return { count: count, isApprox: isApprox }; } try { updateStatus('í˜ì´ì§€ í™•ì¸ ì¤‘...', 0); if (window.location.hostname !== 'in.naver.com') { throw new Error('ë„¤ì´ë²„ ì¸í”Œë£¨ì–¸ì„œ í™ˆ í™”ë©´(in.naver.com)ì—ì„œ ì‹¤í–‰í•´ì£¼ì„¸ìš”.<br><br>ì˜ˆì‹œ: https://in.naver.com/ë³¸ì¸ì•„ì´ë””'); } var urlMatch = window.location.pathname.match(/\/([^\/]+)/); if (!urlMatch || !urlMatch[1]) { throw new Error('ë³¸ì¸ì˜ ì¸í”Œë£¨ì–¸ì„œ í™ˆ í™”ë©´ì—ì„œ ì‹¤í–‰í•´ì£¼ì„¸ìš”.<br><br>ì˜ˆì‹œ: https://in.naver.com/ë³¸ì¸ì•„ì´ë””'); } updateStatus('ì‚¬ìš©ì ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ì¤‘...', 2); updateStatus('íŒ¬ ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™ ì¤‘...', 3); if (!window.location.pathname.includes('/myFan') && !window.location.pathname.includes('/myStar')) { var fanLinkFound = false; for (var attempt = 0; attempt < 10; attempt++) { var fanLink = document.querySelector('[data-role="fan"]'); if (fanLink) { console.log('[ì´ˆê¸°í™”] íŒ¬ ë§í¬ ë°œê²¬, í´ë¦­ ì‹œë„ (' + (attempt + 1) + 'ë²ˆì§¸)'); fanLink.click(); fanLinkFound = true; await new Promise(function(resolve) { setTimeout(resolve, 1500); }); break; } await new Promise(function(resolve) { setTimeout(resolve, 200); }); } if (!fanLinkFound) { console.log('[ì´ˆê¸°í™”] íŒ¬ ë§í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ìµœëŒ€ ì‹œë„ íšŸìˆ˜ ì´ˆê³¼)'); } } updateStatus('ì´ íŒ¬ ìˆ˜ í™•ì¸ ì¤‘...', 5); var tabs = document.querySelectorAll('[role="tab"]'); for (var i = 0; i < tabs.length; i++) { var tab = tabs[i]; var href = tab.getAttribute('href'); var em = tab.querySelector('em'); if (em) { var parsed = parseCountText(em.textContent); if (href && href.includes('/myFan')) { STATE.totalFollowers = parsed.count; STATE.isFollowersApprox = parsed.isApprox; } else if (href && href.includes('/myStar')) { STATE.totalFollowing = parsed.count; STATE.isFollowingApprox = parsed.isApprox; } } } console.log('ì´ íŒ”ë¡œì›Œ:', STATE.totalFollowers, STATE.isFollowersApprox ? '(ìµœì†Œ)' : '', 'ì´ íŒ”ë¡œì‰:', STATE.totalFollowing, STATE.isFollowingApprox ? '(ìµœì†Œ)' : ''); var spaceId = null; if (window.__NEXT_DATA__) { try { var pageProps = window.__NEXT_DATA__.props.pageProps; if (pageProps) { spaceId = pageProps.spaceId || (pageProps.initialState && pageProps.initialState.space && pageProps.initialState.space.spaceId); } } catch (e) {} } if (!spaceId) { var scripts = document.querySelectorAll('script'); for (var i = 0; i < scripts.length; i++) { var match = (scripts[i].textContent || '').match(/spaceId["\s:]+(\d+)/); if (match) { spaceId = match[1]; break; } } } if (!spaceId) throw new Error('ê³„ì • ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'); STATE.mySpaceId = spaceId; console.log('spaceId:', spaceId); updateStatus('ë‚˜ë¥¼ íŒ¬ í•œ ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘...<br><span style="font-size: 12px; color: #666;">0ëª… ìˆ˜ì§‘ ì™„ë£Œ</span>', 15); var cursor = null; while (true) { var apiUrl = 'https://gw.in.naver.com/home/api/v2/spaces/' + spaceId + '/subscribes/followers?limit=20&subscriberType=SPACE&sort=RECENT'; if (cursor) apiUrl = 'https://gw.in.naver.com/home/api/v2/spaces/' + spaceId + '/subscribes/followers?cursor=' + cursor + '&limit=20&subscriberType=SPACE&sort=RECENT'; var response = await fetch(apiUrl, { credentials: 'include', headers: { 'accept': 'application/json, text/plain, */*', 'x-api-level': '11' } }); if (!response.ok) throw new Error('íŒ”ë¡œì›Œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨ (' + response.status + ')'); var data = await response.json(); STATE.followers.push.apply(STATE.followers, data.data); var progressPercent = 15; if (STATE.totalFollowers > 0) { var calculated = (STATE.followers.length / STATE.totalFollowers) * 35; progressPercent = 15 + Math.min(STATE.isFollowersApprox ? 33 : 35, calculated); } var countText = STATE.followers.length + (STATE.totalFollowers > 0 ? ' / ' + (STATE.isFollowersApprox ? 'ì•½ ' : '') + STATE.totalFollowers.toLocaleString() + (STATE.isFollowersApprox ? '+' : '') : '') + 'ëª… ìˆ˜ì§‘'; updateStatus('ë‚˜ë¥¼ íŒ¬ í•œ ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘...<br><span style="font-size: 12px; color: #666;">' + countText + '</span>', progressPercent); if (!data.paging || !data.paging.nextCursor) break; cursor = data.paging.nextCursor; await new Promise(function(resolve) { setTimeout(resolve, 300); }); } console.log('[íŒ”ë¡œì›Œ ìˆ˜ì§‘ ì™„ë£Œ] ì´', STATE.followers.length, 'ëª… (ì˜ˆìƒ:', STATE.totalFollowers + 'ëª…, ì°¨ì´:', (STATE.totalFollowers - STATE.followers.length) + 'ëª…)'); updateStatus('âœ“ ë‚˜ë¥¼ íŒ¬ í•œ: ' + STATE.followers.length + 'ëª…<br><br>ì ì‹œ ëŒ€ê¸° ì¤‘...', 50); await new Promise(function(resolve) { setTimeout(resolve, 2000); }); console.log('[íŒ”ë¡œì‰ ìˆ˜ì§‘ ì‹œì‘] ì˜ˆìƒ:', STATE.totalFollowing, 'ëª…, ê·¼ì‚¬ê°’:', STATE.isFollowingApprox); updateStatus('âœ“ ë‚˜ë¥¼ íŒ¬ í•œ: ' + STATE.followers.length + 'ëª…<br><br>ë‚´ê°€ íŒ¬ í•œ ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘...<br><span style="font-size: 12px; color: #666;">0ëª… ìˆ˜ì§‘ ì™„ë£Œ</span>', 50); cursor = null; while (true) { var apiUrl = 'https://gw.in.naver.com/home/api/v2/spaces/' + spaceId + '/subscribes/following?limit=20&sort=RECENT'; if (cursor) apiUrl = 'https://gw.in.naver.com/home/api/v2/spaces/' + spaceId + '/subscribes/following?cursor=' + cursor + '&limit=20&sort=RECENT'; var response = await fetch(apiUrl, { credentials: 'include', headers: { 'accept': 'application/json, text/plain, */*', 'x-api-level': '11' } }); if (!response.ok) throw new Error('íŒ”ë¡œì‰ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨ (' + response.status + ')'); var data = await response.json(); STATE.following.push.apply(STATE.following, data.data); var progressPercent = 50; if (STATE.totalFollowing > 0) { var calculated = (STATE.following.length / STATE.totalFollowing) * 35; progressPercent = 50 + Math.min(STATE.isFollowingApprox ? 33 : 35, calculated); } var countText = STATE.following.length + (STATE.totalFollowing > 0 ? ' / ' + (STATE.isFollowingApprox ? 'ì•½ ' : '') + STATE.totalFollowing.toLocaleString() + (STATE.isFollowingApprox ? '+' : '') : '') + 'ëª… ìˆ˜ì§‘'; updateStatus('ë‚´ê°€ íŒ¬ í•œ ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘...<br><span style="font-size: 12px; color: #666;">' + countText + '</span>', progressPercent); if (!data.paging || !data.paging.nextCursor) break; cursor = data.paging.nextCursor; await new Promise(function(resolve) { setTimeout(resolve, 1000); }); } console.log('[íŒ”ë¡œì‰ ìˆ˜ì§‘ ì™„ë£Œ] ì´', STATE.following.length, 'ëª… (ì˜ˆìƒ:', STATE.totalFollowing + 'ëª…, ì°¨ì´:', (STATE.totalFollowing - STATE.following.length) + 'ëª…)'); updateStatus('âœ“ ë‚˜ë¥¼ íŒ¬ í•œ: ' + STATE.followers.length + 'ëª…<br>âœ“ ë‚´ê°€ íŒ¬ í•œ: ' + STATE.following.length + 'ëª…<br><br>ë°ì´í„° ë¶„ì„ ì¤‘...', 90); recalculateFollowLists(); updateStatus('âœ“ ë‚˜ë¥¼ íŒ¬ í•œ: ' + STATE.followers.length + 'ëª…<br>âœ“ ë‚´ê°€ íŒ¬ í•œ: ' + STATE.following.length + 'ëª…<br>âœ“ ë‚˜ë§Œ íŒ¬ í•œ: ' + STATE.onlyIFollow.length + 'ëª…<br>âœ“ ìƒëŒ€ë§Œ íŒ¬ í•œ: ' + STATE.onlyFollowsMe.length + 'ëª…<br>âœ“ ì„œë¡œ íŒ¬ í•œ: ' + STATE.mutual.length + 'ëª…<br><br>ì—‘ì…€ íŒŒì¼ ìƒì„± ì¤‘...', 95); function formatData(items) { return items.map(function(item) { return { 'ë‹‰ë„¤ì„': item.nickName, 'Space ID': item.spaceId, 'í‚¤ì›Œë“œ': item.myKeyword || '', 'íŒ¬ìˆ˜': item.subscriberCount || 0, 'URL ID': item.urlId || '', 'í”„ë¡œí•„ URL': item.urlId ? 'https://in.naver.com/' + item.urlId : '', 'ê°€ì…ì¼': item.createdAt ? new Date(item.createdAt).toLocaleDateString('ko-KR') : '', 'ìµœê·¼ ì½˜í…ì¸ ': item.lastContentsCreatedAt ? new Date(item.lastContentsCreatedAt).toLocaleDateString('ko-KR') : '-', 'í™œì„± ì±„ë„ ìˆ˜': item.activeChannelCount || '', 'í™œì„± ì±„ë„ íƒ€ì…': item.activeChannelTypes ? item.activeChannelTypes.join(', ') : '' }; }); } function regenerateExcel() { var wb = XLSX.utils.book_new(); XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(formatData(STATE.followers)), 'ë‚˜ë¥¼ íŒ¬ í•œ'); XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(formatData(STATE.following)), 'ë‚´ê°€ íŒ¬ í•œ'); XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(formatData(STATE.onlyIFollow)), 'ë‚˜ë§Œ íŒ¬ í•œ'); XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(formatData(STATE.onlyFollowsMe)), 'ìƒëŒ€ë§Œ íŒ¬ í•œ'); XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(formatData(STATE.mutual)), 'ì„œë¡œ íŒ¬ í•œ'); return wb; } window.downloadExcel = function() { var wb = regenerateExcel(); XLSX.writeFile(wb, 'ì¸í”Œë£¨ì–¸ì„œ_íŒ¬ëª©ë¡_' + new Date().toISOString().slice(0, 10).replace(/-/g, '') + '.xlsx'); }; window.followBack = async function() { if (STATE.onlyFollowsMe.length === 0) { alert('ìƒëŒ€ë§Œ íŒ¬ í•œ ëŒ€ìƒì´ ì—†ìŠµë‹ˆë‹¤.'); buttonContainer.innerHTML = ''; addButton('ğŸ“¥ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ', window.downloadExcel, '#00c73c'); if (STATE.onlyFollowsMe.length > 0) addButton('ğŸ’š ìƒëŒ€ë§Œ íŒ¬ í•œ : ìˆ˜ë½ (' + STATE.onlyFollowsMe.length + 'ëª…)', window.followBack, '#4CAF50'); if (STATE.onlyIFollow.length > 0) addButton('ğŸ—‘ï¸ ë‚˜ë§Œ íŒ¬ í•œ : ì œê±° (' + STATE.onlyIFollow.length + 'ëª…)', window.unfollowOnly, '#ff6b6b'); addButton('âŒ ì¢…ë£Œ', closeAndCleanup, '#ff4444'); return; } if (!confirm('âš ï¸ ìƒëŒ€ë§Œ íŒ¬ í•œ : ìˆ˜ë½\n\n"ìƒëŒ€ë§Œ íŒ¬ í•œ" ' + STATE.onlyFollowsMe.length + 'ëª…ì—ê²Œ ë§íŒ¬í•©ë‹ˆë‹¤.\nì™„ë£Œê¹Œì§€ ì•½ ' + Math.ceil(STATE.onlyFollowsMe.length * 1.2 / 60) + 'ë¶„ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return; updateStatus('ìƒëŒ€ë§Œ íŒ¬ í•œ ìˆ˜ë½ ì§„í–‰ ì¤‘...<br><span style="font-size: 12px; color: #666;">0 / ' + STATE.onlyFollowsMe.length + 'ëª… ì²˜ë¦¬</span>', 0); var successCount = 0; var failCount = 0; var targetList = STATE.onlyFollowsMe.slice(); for (var i = 0; i < targetList.length; i++) { if (await toggleFollow(targetList[i].spaceId, 'followback')) { successCount++; } else { failCount++; } var progress = ((i + 1) / targetList.length) * 100; updateStatus('ìƒëŒ€ë§Œ íŒ¬ í•œ ìˆ˜ë½ ì§„í–‰ ì¤‘...<br><span style="font-size: 12px; color: #666;">' + (i + 1) + ' / ' + targetList.length + 'ëª… ì²˜ë¦¬ (ì„±ê³µ: ' + successCount + ', ì‹¤íŒ¨: ' + failCount + ')</span>', progress); await new Promise(function(resolve) { setTimeout(resolve, 1000); }); } updateStatus('<div style="color: #00c73c; font-weight: bold; font-size: 15px; margin-bottom: 10px;">âœ“ ìƒëŒ€ë§Œ íŒ¬ í•œ ìˆ˜ë½ ì™„ë£Œ!</div><div style="font-size: 13px; line-height: 1.6; color: #555;">â€¢ ì„±ê³µ: ' + successCount + 'ëª…<br>â€¢ ì‹¤íŒ¨: ' + failCount + 'ëª…<br>â€¢ ì´ ì²˜ë¦¬: ' + targetList.length + 'ëª…<br><br>ê³„ì†í•´ì„œ ë‹¤ë¥¸ ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>', 100); buttonContainer.innerHTML = ''; addButton('ğŸ“¥ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ', window.downloadExcel, '#00c73c'); if (STATE.onlyFollowsMe.length > 0) addButton('ğŸ’š ìƒëŒ€ë§Œ íŒ¬ í•œ : ìˆ˜ë½ (' + STATE.onlyFollowsMe.length + 'ëª…)', window.followBack, '#4CAF50'); if (STATE.onlyIFollow.length > 0) addButton('ğŸ—‘ï¸ ë‚˜ë§Œ íŒ¬ í•œ : ì œê±° (' + STATE.onlyIFollow.length + 'ëª…)', window.unfollowOnly, '#ff6b6b'); addButton('âŒ ì¢…ë£Œ', closeAndCleanup, '#ff4444'); }; window.unfollowOnly = async function() { if (STATE.onlyIFollow.length === 0) { alert('ë‚˜ë§Œ íŒ¬ í•œ ëŒ€ìƒì´ ì—†ìŠµë‹ˆë‹¤.'); buttonContainer.innerHTML = ''; addButton('ğŸ“¥ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ', window.downloadExcel, '#00c73c'); if (STATE.onlyFollowsMe.length > 0) addButton('ğŸ’š ìƒëŒ€ë§Œ íŒ¬ í•œ : ìˆ˜ë½ (' + STATE.onlyFollowsMe.length + 'ëª…)', window.followBack, '#4CAF50'); if (STATE.onlyIFollow.length > 0) addButton('ğŸ—‘ï¸ ë‚˜ë§Œ íŒ¬ í•œ : ì œê±° (' + STATE.onlyIFollow.length + 'ëª…)', window.unfollowOnly, '#ff6b6b'); addButton('âŒ ì¢…ë£Œ', closeAndCleanup, '#ff4444'); return; } if (!confirm('âš ï¸ ë‚˜ë§Œ íŒ¬ í•œ : ì œê±°\n\n"ë‚˜ë§Œ íŒ¬ í•œ" ' + STATE.onlyIFollow.length + 'ëª…ì„ íŒ¬ ì·¨ì†Œí•©ë‹ˆë‹¤.\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìœ¼ë©°, ì™„ë£Œê¹Œì§€ ì•½ ' + Math.ceil(STATE.onlyIFollow.length * 1.2 / 60) + 'ë¶„ ì†Œìš”ë©ë‹ˆë‹¤.\n\nì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return; updateStatus('ë‚˜ë§Œ íŒ¬ í•œ ì œê±° ì§„í–‰ ì¤‘...<br><span style="font-size: 12px; color: #666;">0 / ' + STATE.onlyIFollow.length + 'ëª… ì²˜ë¦¬</span>', 0); var successCount = 0; var failCount = 0; var targetList = STATE.onlyIFollow.slice(); for (var i = 0; i < targetList.length; i++) { if (await toggleFollow(targetList[i].spaceId, 'unfollow')) { successCount++; } else { failCount++; } var progress = ((i + 1) / targetList.length) * 100; updateStatus('ë‚˜ë§Œ íŒ¬ í•œ ì œê±° ì§„í–‰ ì¤‘...<br><span style="font-size: 12px; color: #666;">' + (i + 1) + ' / ' + targetList.length + 'ëª… ì²˜ë¦¬ (ì„±ê³µ: ' + successCount + ', ì‹¤íŒ¨: ' + failCount + ')</span>', progress); await new Promise(function(resolve) { setTimeout(resolve, 1000); }); } updateStatus('<div style="color: #00c73c; font-weight: bold; font-size: 15px; margin-bottom: 10px;">âœ“ ë‚˜ë§Œ íŒ¬ í•œ ì œê±° ì™„ë£Œ!</div><div style="font-size: 13px; line-height: 1.6; color: #555;">â€¢ ì„±ê³µ: ' + successCount + 'ëª…<br>â€¢ ì‹¤íŒ¨: ' + failCount + 'ëª…<br>â€¢ ì´ ì²˜ë¦¬: ' + targetList.length + 'ëª…<br><br>ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</div>', 100); buttonContainer.innerHTML = ''; addButton('ğŸ“¥ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ', window.downloadExcel, '#00c73c'); if (STATE.onlyFollowsMe.length > 0) addButton('ğŸ’š ìƒëŒ€ë§Œ íŒ¬ í•œ : ìˆ˜ë½ (' + STATE.onlyFollowsMe.length + 'ëª…)', window.followBack, '#4CAF50'); if (STATE.onlyIFollow.length > 0) addButton('ğŸ—‘ï¸ ë‚˜ë§Œ íŒ¬ í•œ : ì œê±° (' + STATE.onlyIFollow.length + 'ëª…)', window.unfollowOnly, '#ff6b6b'); addButton('âŒ ì¢…ë£Œ', closeAndCleanup, '#ff4444'); }; updateStatus('<div style="color: #00c73c; font-weight: bold; font-size: 15px; margin-bottom: 10px;">âœ“ ì‘ì—… ì™„ë£Œ!</div><div style="font-size: 13px; line-height: 1.6; color: #555;">â€¢ ë‚˜ë¥¼ íŒ¬ í•œ: ' + STATE.followers.length + 'ëª…' + (STATE.totalFollowers && STATE.totalFollowers !== STATE.followers.length ? ' <span style="color: #999;">(ì›¹í™”ë©´ ìƒ í‘œì‹œ: ' + (STATE.isFollowersApprox ? 'ì•½ ' : '') + STATE.totalFollowers.toLocaleString() + (STATE.isFollowersApprox ? '+' : '') + 'ëª…)</span>' : '') + '<br>â€¢ ë‚´ê°€ íŒ¬ í•œ: ' + STATE.following.length + 'ëª…' + (STATE.totalFollowing && STATE.totalFollowing !== STATE.following.length ? ' <span style="color: #999;">(ì›¹í™”ë©´ ìƒ í‘œì‹œ: ' + (STATE.isFollowingApprox ? 'ì•½ ' : '') + STATE.totalFollowing.toLocaleString() + (STATE.isFollowingApprox ? '+' : '') + 'ëª…)</span>' : '') + '<br>â€¢ ë‚˜ë§Œ íŒ¬ í•œ: ' + STATE.onlyIFollow.length + 'ëª…<br>â€¢ ìƒëŒ€ë§Œ íŒ¬ í•œ: ' + STATE.onlyFollowsMe.length + 'ëª…<br>â€¢ ì„œë¡œ íŒ¬ í•œ: ' + STATE.mutual.length + 'ëª…<br><br><span style="font-size: 11px; color: #999;">ğŸ’¡ ë¹„ì¸í”Œ ëª…ë‹¨ì€ ì¶”ì¶œë˜ì§€ ì•Šì•„ ìˆ«ì ì°¨ì´ê°€ ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span></div>', 100); buttonContainer.innerHTML = ''; addButton('ğŸ“¥ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ', window.downloadExcel, '#00c73c'); if (STATE.onlyFollowsMe.length > 0) addButton('ğŸ’š ìƒëŒ€ë§Œ íŒ¬ í•œ : ìˆ˜ë½ (' + STATE.onlyFollowsMe.length + 'ëª…)', window.followBack, '#4CAF50'); if (STATE.onlyIFollow.length > 0) addButton('ğŸ—‘ï¸ ë‚˜ë§Œ íŒ¬ í•œ : ì œê±° (' + STATE.onlyIFollow.length + 'ëª…)', window.unfollowOnly, '#ff6b6b'); addButton('âŒ ì¢…ë£Œ', closeAndCleanup, '#ff4444'); STATE.buttonsActive = true; console.log('[ìë™ í™œì„±í™”] ì¸í”Œ ëª©ë¡ì— ë²„íŠ¼ ì¶”ê°€ ì‹œì‘'); setTimeout(async function() { await addButtonsToAllItems(); startObservingList(); startUrlObserver(); }, 1000); } catch (error) { console.error('ì˜¤ë¥˜ ìƒì„¸:', error); updateStatus('<div style="color: #ff4444; font-weight: bold;">âŒ ì˜¤ë¥˜ ë°œìƒ</div><div style="font-size: 12px; margin-top: 8px; color: #666;">' + error.message + '</div>', 0); buttonContainer.innerHTML = ''; addButton('âŒ ì¢…ë£Œ', closeAndCleanup, '#ff4444'); } })();
